{"version":3,"sources":["main.js"],"names":["$colorShow","document","querySelector","$brushList","$rubber","$colorList","colorChoice","widthChoice","rubberChoice","colorStore","widthStore","onclick","e","currentTarget","classList","add","remove","addEventListener","target","temporary","brushList","children","brush","i","length","rubber","clearCanvas","colorList","color","style","background","$canvasWrapper","$canvas","ctx","getContext","mouseState","touchDevice","lastLocation","width","clientWidth","height","clientHeight","drawLine","x1","y1","x2","y2","lineWidth","strokeStyle","lineCap","beginPath","moveTo","lineTo","stroke","drawDot","x","y","fillStyle","arc","Math","PI","fill","clearLine","clearDot","ontouchstart","touches","clientX","clientY","ontouchmove","onmousedown","onmouseup","onmousemove"],"mappings":"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","file":"main.626d1616.js","sourceRoot":"..\\src","sourcesContent":["import \"./components/reset.css\"\r\nimport \"./components/style.css\"\r\nimport \"./components/toolbar.css\"\r\nimport \"./components/canvas.css\"\r\n\r\n// 我原本想把 toolbar 和 canvas 的 JS 代码分成两个文件来写\r\n// 但是 它们数据之间的通信用原生 JS 直接写貌似有些困难，所以就还是写在一起，假装是分开的\r\n// toolbar 的 JS 代码，一直到第 67 行代码开始 canvas 的 JS 代码\r\nconst $colorShow = document.querySelector('.color-show')\r\nconst $brushList = document.querySelector('.brush-list')\r\nconst $rubber = document.querySelector('.rubber')\r\nconst $colorList = document.querySelector('.color-list')\r\n\r\nlet colorChoice = 'black'\r\nlet widthChoice = 15\r\nlet rubberChoice = false\r\nlet colorStore = ['black', 'red', '#ff5000', '#1AAD19', 'blue', '#8000ff', '#483D8D']\r\nlet widthStore = [20, 15, 10]\r\n\r\n$colorShow.onclick = (e) => {\r\n    e.currentTarget.classList.add('selected')\r\n    $rubber.classList.remove('selected')\r\n    rubberChoice = false\r\n}\r\n\r\n$brushList.addEventListener('click', (e) => {\r\n    if (e.target !== e.currentTarget) {\r\n        const  temporary = e.currentTarget\r\n        const brushList = temporary.children\r\n        const brush = e.target\r\n        for (let i = 0; i < brushList.length; i++) {\r\n            if (brushList[i] !== brush) {\r\n                brushList[i].classList.remove('selected')\r\n            } else {\r\n                brush.classList.add('selected')\r\n                widthChoice = widthStore[i]\r\n            }\r\n        }\r\n\r\n    }\r\n})\r\n\r\n$rubber.addEventListener('click', (e) => {\r\n    let rubber =e.currentTarget\r\n    rubber.classList.add('selected')\r\n    $colorShow.classList.remove('selected')\r\n    if(rubberChoice){\r\n        clearCanvas()\r\n        rubberChoice=false\r\n        rubber.classList.remove('selected')\r\n        $colorShow.classList.add('selected')\r\n    }else{\r\n        rubberChoice = true\r\n    }\r\n})\r\n\r\n$colorList.addEventListener('click', (e) => {\r\n    if (e.target !== e.currentTarget) {\r\n        $rubber.classList.remove('selected')\r\n        const temporary = e.currentTarget\r\n        const colorList = temporary.children\r\n        let color = e.target\r\n        for (let i = 0; i < colorList.length; i++) {\r\n            if (colorList[i] === color) {\r\n                color.classList.add('selected')\r\n                colorChoice = colorStore[i]\r\n                rubberChoice = false\r\n                $colorShow.style.background = colorStore[i]\r\n            } else {\r\n                colorList[i].classList.remove('selected')\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\n// canvas 的 JS 代码\r\nconst $canvasWrapper = document.querySelector('.canvas-wrapper')\r\nconst $canvas = document.querySelector('.canvas')\r\nconst ctx = $canvas.getContext('2d');\r\n\r\nlet mouseState = false\r\nlet touchDevice = \"ontouchend\" in document;\r\nlet lastLocation\r\n\r\n$canvas.width = $canvasWrapper.clientWidth\r\n$canvas.height = $canvasWrapper.clientHeight\r\n\r\nfunction drawLine(x1,y1,x2,y2){\r\n    ctx.lineWidth = widthChoice\r\n    ctx.strokeStyle = colorChoice\r\n    ctx.lineCap = 'round'\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1,y1)\r\n    ctx.lineTo(x2,y2)\r\n    ctx.stroke()\r\n    lastLocation = [x2,y2]\r\n}\r\nfunction drawDot(x,y){\r\n    ctx.fillStyle = colorChoice\r\n    ctx.beginPath()\r\n    ctx.arc(x,y,widthChoice/2,0 ,2*Math.PI)\r\n    ctx.fill()\r\n}\r\nfunction clearLine(x1,y1,x2,y2){\r\n    ctx.lineWidth = 30\r\n    ctx.strokeStyle = 'white'\r\n    ctx.lineCap = 'round'\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1,y1)\r\n    ctx.lineTo(x2,y2)\r\n    ctx.stroke()\r\n    lastLocation = [x2,y2]\r\n}\r\n\r\nfunction clearDot(x,y){\r\n    ctx.fillStyle = 'white'\r\n\r\n    ctx.beginPath()\r\n    ctx.arc(x,y,15,0 ,2*Math.PI)\r\n    ctx.fill()\r\n}\r\n\r\nfunction clearCanvas(){\r\n    $canvas.width = $canvasWrapper.clientWidth\r\n    $canvas.height = $canvasWrapper.clientHeight\r\n}\r\n\r\nif (touchDevice) {\r\n    $canvas.ontouchstart = (e) => {\r\n        lastLocation = [e.touches[0].clientX, e.touches[0].clientY]\r\n        if(rubberChoice){\r\n            clearDot(e.touches[0].clientX, e.touches[0].clientY)\r\n        }else{\r\n            drawDot(e.touches[0].clientX, e.touches[0].clientY)\r\n        }\r\n    }\r\n    $canvas.ontouchmove = (e) => {\r\n        if (rubberChoice) {\r\n            clearLine(lastLocation[0],lastLocation[1],e.touches[0].clientX,e.touches[0].clientY)\r\n        } else {\r\n            drawLine(lastLocation[0],lastLocation[1],e.touches[0].clientX,e.touches[0].clientY)\r\n        }\r\n    }\r\n} else {\r\n    $canvas.onmousedown = (e) => {\r\n        if (rubberChoice) {\r\n            clearDot(e.clientX, e.clientY)\r\n        } else {\r\n            drawDot(e.clientX, e.clientY)\r\n        }\r\n        mouseState = true\r\n        lastLocation = [e.clientX, e.clientY]\r\n    }\r\n    $canvas.onmouseup = () => {\r\n        mouseState = false\r\n    }\r\n    $canvas.onmousemove = (e) => {\r\n        if (mouseState) {\r\n            if (rubberChoice) {\r\n                clearLine(lastLocation[0], lastLocation[1], e.clientX, e.clientY)\r\n            } else {\r\n                drawLine(lastLocation[0], lastLocation[1], e.clientX, e.clientY)\r\n            }\r\n        }\r\n    }\r\n}"]}