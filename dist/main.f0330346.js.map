{"version":3,"sources":["main.js"],"names":["$colorShow","document","querySelector","$brushList","$rubber","$colorList","colorChoice","widthChoice","rubberChoice","colorStore","widthStore","onclick","e","currentTarget","classList","add","remove","addEventListener","target","temporary","brushList","children","brush","i","length","rubber","tempory","colorList","color","style","background","$canvasWrapper","$canvas","ctx","getContext","mouseState","touchDevice","lastLocation","width","clientWidth","height","clientHeight","drawLine","x1","y1","x2","y2","lineWidth","strokeStyle","lineCap","beginPath","moveTo","lineTo","stroke","clearLine","x","y","clearRect","clearSquare","ontouchstart","touches","clientX","clientY","ontouchmove","onmousedown","onmouseup","onmousemove"],"mappings":"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","file":"main.f0330346.js","sourceRoot":"..\\src","sourcesContent":["import \"./components/reset.css\"\r\nimport \"./components/style.css\"\r\nimport \"./components/toolbar.css\"\r\nimport \"./components/canvas.css\"\r\n\r\n// 我原本想把 toolbar 和 canvas 的 JS 代码分成两个文件来写\r\n// 但是 它们数据之间的通信用原生 JS 直接写貌似有些困难，所以就还是写在一起，假装是分开的\r\n// toolbar 的 JS 代码，一直到第 67 行代码开始 canvas 的 JS 代码\r\nconst $colorShow = document.querySelector('.color-show')\r\nconst $brushList = document.querySelector('.brush-list')\r\nconst $rubber = document.querySelector('.rubber')\r\nconst $colorList = document.querySelector('.color-list')\r\n\r\nlet colorChoice = 'black'\r\nlet widthChoice = 15\r\nlet rubberChoice = false\r\nlet colorStore = ['black', 'red', '#ff5000', '#1AAD19', 'blue', '#8000ff', '#483D8D']\r\nlet widthStore = [20, 15, 10]\r\n\r\n$colorShow.onclick = (e) => {\r\n    e.currentTarget.classList.add('selected')\r\n    $rubber.classList.remove('selected')\r\n    rubberChoice = false\r\n}\r\n\r\n$brushList.addEventListener('click', (e) => {\r\n    if (e.target !== e.currentTarget) {\r\n        const  temporary = e.currentTarget\r\n        const brushList = temporary.children\r\n        const brush = e.target\r\n        for (let i = 0; i < brushList.length; i++) {\r\n            if (brushList[i] !== brush) {\r\n                brushList[i].classList.remove('selected')\r\n            } else {\r\n                brush.classList.add('selected')\r\n                widthChoice = widthStore[i]\r\n            }\r\n        }\r\n\r\n    }\r\n})\r\n\r\n$rubber.addEventListener('click', (e) => {\r\n    let rubber =e.currentTarget\r\n    rubber.classList.add('selected')\r\n    $colorShow.classList.remove('selected')\r\n    rubberChoice = true\r\n})\r\n\r\n$colorList.addEventListener('click', (e) => {\r\n    if (e.target !== e.currentTarget) {\r\n        $rubber.classList.remove('selected')\r\n        const tempory = e.currentTarget\r\n        const colorList = tempory.children\r\n        let color = e.target\r\n        for (let i = 0; i < colorList.length; i++) {\r\n            if (colorList[i] === color) {\r\n                color.classList.add('selected')\r\n                colorChoice = colorStore[i]\r\n                rubberChoice = false\r\n                $colorShow.style.background = colorStore[i]\r\n            } else {\r\n                colorList[i].classList.remove('selected')\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\n// canvas 的 JS 代码\r\nconst $canvasWrapper = document.querySelector('.canvas-wrapper')\r\nconst $canvas = document.querySelector('.canvas')\r\nconst ctx = $canvas.getContext('2d');\r\n\r\nlet mouseState = false\r\nlet touchDevice = \"ontouchend\" in document;\r\nlet lastLocation\r\n\r\n$canvas.width = $canvasWrapper.clientWidth\r\n$canvas.height = $canvasWrapper.clientHeight\r\n\r\nfunction drawLine(x1,y1,x2,y2){\r\n    ctx.lineWidth = widthChoice\r\n    ctx.strokeStyle = colorChoice\r\n    ctx.lineCap = 'round'\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1,y1)\r\n    ctx.lineTo(x2,y2)\r\n    ctx.stroke()\r\n    lastLocation = [x2,y2]\r\n}\r\nfunction clearLine(x,y){\r\n    ctx.clearRect(x,y,30,30)\r\n}\r\n\r\nfunction clearSquare(x,y){\r\n    ctx.clearRect(x,y,30,30)\r\n}\r\n\r\nif (touchDevice) {\r\n    $canvas.ontouchstart = (e) => {\r\n        lastLocation = [e.touches[0].clientX, e.touches[0].clientY]\r\n        if(rubberChoice){\r\n            clearSquare(e.touches[0].clientX-15, e.touches[0].clientY-15,30,30)\r\n        }\r\n\r\n    }\r\n    $canvas.ontouchmove = (e) => {\r\n        if (rubberChoice) {\r\n            clearLine(e.touches[0].clientX-15, e.touches[0].clientY-15)\r\n        } else {\r\n            drawLine(lastLocation[0],lastLocation[1],e.touches[0].clientX,e.touches[0].clientY)\r\n        }\r\n    }\r\n} else {\r\n    $canvas.onmousedown = (e) => {\r\n        mouseState = true\r\n        lastLocation = [e.clientX, e.clientY]\r\n    }\r\n    $canvas.onmouseup = () => {\r\n        mouseState = false\r\n    }\r\n    $canvas.onmousemove = (e) => {\r\n        if (mouseState) {\r\n            if (rubberChoice) {\r\n                clearLine(e.clientX - 15, e.clientY - 15, 30, 30)\r\n            } else {\r\n                drawLine(lastLocation[0], lastLocation[1],e.clientX, e.clientY)\r\n            }\r\n        }\r\n    }\r\n    $canvas.onclick =(e)=>{\r\n        if(rubberChoice){\r\n            clearSquare(e.clientX-15, e.clientY-15,30,30)\r\n        }\r\n    }\r\n}"]}